<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高阶函数详解与实战训练 | 长街有风</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" href="/goodBlog/favicon.ico" type="iamge/x-icon">
    <meta name="description" content="记录学习中的点点滴滴">
    <meta name="keywords" content="长街有风 前端 前端文章">
    
    <link rel="preload" href="/goodBlog/assets/css/0.styles.1a45a8ae.css" as="style"><link rel="preload" href="/goodBlog/assets/js/app.d28268c4.js" as="script"><link rel="preload" href="/goodBlog/assets/js/2.d2277413.js" as="script"><link rel="preload" href="/goodBlog/assets/js/86.8dc4a8c3.js" as="script"><link rel="preload" href="/goodBlog/assets/js/4.7b44c081.js" as="script"><link rel="preload" href="/goodBlog/assets/js/3.6a3c886d.js" as="script"><link rel="prefetch" href="/goodBlog/assets/js/10.05c2e5d3.js"><link rel="prefetch" href="/goodBlog/assets/js/100.89e3a374.js"><link rel="prefetch" href="/goodBlog/assets/js/101.f8cf1994.js"><link rel="prefetch" href="/goodBlog/assets/js/11.f03ca467.js"><link rel="prefetch" href="/goodBlog/assets/js/12.076a4731.js"><link rel="prefetch" href="/goodBlog/assets/js/13.d2471796.js"><link rel="prefetch" href="/goodBlog/assets/js/14.aa370daa.js"><link rel="prefetch" href="/goodBlog/assets/js/15.ce3ac647.js"><link rel="prefetch" href="/goodBlog/assets/js/16.852e98ff.js"><link rel="prefetch" href="/goodBlog/assets/js/17.93f57baa.js"><link rel="prefetch" href="/goodBlog/assets/js/18.9ba53fbd.js"><link rel="prefetch" href="/goodBlog/assets/js/19.0ff053ed.js"><link rel="prefetch" href="/goodBlog/assets/js/20.bd53997c.js"><link rel="prefetch" href="/goodBlog/assets/js/21.8ffe8741.js"><link rel="prefetch" href="/goodBlog/assets/js/22.ae7d0029.js"><link rel="prefetch" href="/goodBlog/assets/js/23.53afd0d5.js"><link rel="prefetch" href="/goodBlog/assets/js/24.bd29090d.js"><link rel="prefetch" href="/goodBlog/assets/js/25.00e6af77.js"><link rel="prefetch" href="/goodBlog/assets/js/26.35165b68.js"><link rel="prefetch" href="/goodBlog/assets/js/27.a2e90537.js"><link rel="prefetch" href="/goodBlog/assets/js/28.838ac013.js"><link rel="prefetch" href="/goodBlog/assets/js/29.959b44d0.js"><link rel="prefetch" href="/goodBlog/assets/js/30.61a94ea6.js"><link rel="prefetch" href="/goodBlog/assets/js/31.d8dbba38.js"><link rel="prefetch" href="/goodBlog/assets/js/32.2195566d.js"><link rel="prefetch" href="/goodBlog/assets/js/33.3f6e9870.js"><link rel="prefetch" href="/goodBlog/assets/js/34.7a02b405.js"><link rel="prefetch" href="/goodBlog/assets/js/35.3a62b3c5.js"><link rel="prefetch" href="/goodBlog/assets/js/36.caada6f2.js"><link rel="prefetch" href="/goodBlog/assets/js/37.7740cdf0.js"><link rel="prefetch" href="/goodBlog/assets/js/38.6151e77b.js"><link rel="prefetch" href="/goodBlog/assets/js/39.33134a34.js"><link rel="prefetch" href="/goodBlog/assets/js/40.82ce5221.js"><link rel="prefetch" href="/goodBlog/assets/js/41.3d295fb8.js"><link rel="prefetch" href="/goodBlog/assets/js/42.ad3b9012.js"><link rel="prefetch" href="/goodBlog/assets/js/43.c5a12d58.js"><link rel="prefetch" href="/goodBlog/assets/js/44.570946d0.js"><link rel="prefetch" href="/goodBlog/assets/js/45.4e91972d.js"><link rel="prefetch" href="/goodBlog/assets/js/46.bb2a880d.js"><link rel="prefetch" href="/goodBlog/assets/js/47.03e818e0.js"><link rel="prefetch" href="/goodBlog/assets/js/48.6e9a3ab4.js"><link rel="prefetch" href="/goodBlog/assets/js/49.408fda99.js"><link rel="prefetch" href="/goodBlog/assets/js/5.02f0798d.js"><link rel="prefetch" href="/goodBlog/assets/js/50.3993d4c7.js"><link rel="prefetch" href="/goodBlog/assets/js/51.240d7d96.js"><link rel="prefetch" href="/goodBlog/assets/js/52.1dacb3a3.js"><link rel="prefetch" href="/goodBlog/assets/js/53.d99ee58d.js"><link rel="prefetch" href="/goodBlog/assets/js/54.119f8150.js"><link rel="prefetch" href="/goodBlog/assets/js/55.4d39b183.js"><link rel="prefetch" href="/goodBlog/assets/js/56.72765c69.js"><link rel="prefetch" href="/goodBlog/assets/js/57.25c2728c.js"><link rel="prefetch" href="/goodBlog/assets/js/58.93c4de40.js"><link rel="prefetch" href="/goodBlog/assets/js/59.07330fc9.js"><link rel="prefetch" href="/goodBlog/assets/js/6.f2844f3b.js"><link rel="prefetch" href="/goodBlog/assets/js/60.a9264c75.js"><link rel="prefetch" href="/goodBlog/assets/js/61.dcf4116c.js"><link rel="prefetch" href="/goodBlog/assets/js/62.c3783996.js"><link rel="prefetch" href="/goodBlog/assets/js/63.51b99bd0.js"><link rel="prefetch" href="/goodBlog/assets/js/64.a2055924.js"><link rel="prefetch" href="/goodBlog/assets/js/65.4d8ac745.js"><link rel="prefetch" href="/goodBlog/assets/js/66.c0ff17e2.js"><link rel="prefetch" href="/goodBlog/assets/js/67.1cebd1da.js"><link rel="prefetch" href="/goodBlog/assets/js/68.3ac34f13.js"><link rel="prefetch" href="/goodBlog/assets/js/69.66122a21.js"><link rel="prefetch" href="/goodBlog/assets/js/7.d712acc0.js"><link rel="prefetch" href="/goodBlog/assets/js/70.cf684b73.js"><link rel="prefetch" href="/goodBlog/assets/js/71.3f6457ac.js"><link rel="prefetch" href="/goodBlog/assets/js/72.5c597fbf.js"><link rel="prefetch" href="/goodBlog/assets/js/73.cb25ed57.js"><link rel="prefetch" href="/goodBlog/assets/js/74.45e7e30c.js"><link rel="prefetch" href="/goodBlog/assets/js/75.5462c8ff.js"><link rel="prefetch" href="/goodBlog/assets/js/76.9d48239d.js"><link rel="prefetch" href="/goodBlog/assets/js/77.fdd6937e.js"><link rel="prefetch" href="/goodBlog/assets/js/78.694293b3.js"><link rel="prefetch" href="/goodBlog/assets/js/79.d9d0b208.js"><link rel="prefetch" href="/goodBlog/assets/js/8.ea8178e6.js"><link rel="prefetch" href="/goodBlog/assets/js/80.eaab824c.js"><link rel="prefetch" href="/goodBlog/assets/js/81.02958dbf.js"><link rel="prefetch" href="/goodBlog/assets/js/82.e9176cac.js"><link rel="prefetch" href="/goodBlog/assets/js/83.ebe9efcd.js"><link rel="prefetch" href="/goodBlog/assets/js/84.57d2a35b.js"><link rel="prefetch" href="/goodBlog/assets/js/85.644297a0.js"><link rel="prefetch" href="/goodBlog/assets/js/87.3a9b6fab.js"><link rel="prefetch" href="/goodBlog/assets/js/88.469cfb5f.js"><link rel="prefetch" href="/goodBlog/assets/js/89.0d83276b.js"><link rel="prefetch" href="/goodBlog/assets/js/9.a872d56c.js"><link rel="prefetch" href="/goodBlog/assets/js/90.002533a8.js"><link rel="prefetch" href="/goodBlog/assets/js/91.44d2f90c.js"><link rel="prefetch" href="/goodBlog/assets/js/92.9b0453a7.js"><link rel="prefetch" href="/goodBlog/assets/js/93.5dbf6406.js"><link rel="prefetch" href="/goodBlog/assets/js/94.5ecddf2f.js"><link rel="prefetch" href="/goodBlog/assets/js/95.9973d547.js"><link rel="prefetch" href="/goodBlog/assets/js/96.b230b097.js"><link rel="prefetch" href="/goodBlog/assets/js/97.a8be5d24.js"><link rel="prefetch" href="/goodBlog/assets/js/98.b93b29b6.js"><link rel="prefetch" href="/goodBlog/assets/js/99.a90f341b.js">
    <link rel="stylesheet" href="/goodBlog/assets/css/0.styles.1a45a8ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/goodBlog/" class="home-link router-link-active"><!----> <span class="site-name">长街有风</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <div class="my_introduce" style="padding-left:1rem;"><div class="introduce_component" data-v-ef03d332><img src="/goodBlog/small.jpg" alt data-v-ef03d332> <div class="intro_content" data-v-ef03d332><h3 data-v-ef03d332>长街有风</h3> <p data-v-ef03d332>十里长安街，有风徐徐来</p></div></div></div> <ul class="sidebar-links"><li><a href="/goodBlog/webframe/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><img src="http://img.xiaogangzai.cn/16bec3fc59d12ae5_highfunction.jpg" alt=""></p><div class="table-of-contents"><ul><li><a href="#前言">前言</a></li><li><a href="#高阶函数定义">高阶函数定义</a></li><li><a href="#函数作为参数情况">函数作为参数情况</a></li><li><a href="#array-prototype-map">Array.prototype.map</a><ul><li><a href="#不使用高阶函数">不使用高阶函数</a></li><li><a href="#使用高阶函数">使用高阶函数</a></li><li><a href="#map高阶函数注意点">map高阶函数注意点</a></li><li><a href="#map高阶函数对应的一道经典面试题">map高阶函数对应的一道经典面试题</a></li></ul></li><li><a href="#array-prototype-reduce">Array.prototype.reduce</a><ul><li><a href="#不使用高阶函数">不使用高阶函数</a></li><li><a href="#使用高阶函数">使用高阶函数</a></li></ul></li><li><a href="#array-prototype-filter">Array.prototype.filter</a><ul><li><a href="#不使用高阶函数">不使用高阶函数</a></li><li><a href="#使用高阶函数">使用高阶函数</a></li><li><a href="#filter注意点说明">filter注意点说明</a></li></ul></li><li><a href="#array-prototype-sort">Array.prototype.sort</a><ul><li><a href="#sort排序算法的底层实现">sort排序算法的底层实现</a></li><li><a href="#如何改进排序算法实现数字正确排序呢">如何改进排序算法实现数字正确排序呢？</a></li></ul></li><li><a href="#函数作为返回值输出">函数作为返回值输出</a><ul><li><a href="#istype-函数">isType 函数</a></li><li><a href="#add求和函数">add求和函数</a></li></ul></li><li><a href="#如何自己创建高阶函数">如何自己创建高阶函数</a><ul><li><a href="#代码分析讲解">代码分析讲解：</a></li></ul></li><li><a href="#总结">总结</a><ul><li><a href="#公众号技术栈路线">公众号技术栈路线</a></li><li><a href="#加入我们">加入我们</a></li></ul></li></ul></div><p></p> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>一道经典面试题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//JS实现一个无限累加的add函数</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">//1 </span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//3</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">//6</span>
</code></pre></div><p>当大家看到这个面试题的时候，能否在第一时间想到使用<strong>高阶函数</strong>实现？想到在实际项目开发过程中，用到哪些高级函数？有没有想过自己创造一个高阶函数呢？开始本篇文章的学习</p> <h2 id="高阶函数定义"><a href="#高阶函数定义" class="header-anchor">#</a> 高阶函数定义</h2> <p><code>高阶函数</code>英文叫 <code>Higher-order function</code>。高阶函数是对其他函数进行操作的函数，操作可以是将它们作为参数，或者返回它们。简单总结为高阶函数是<code>一个接收函数作为参数</code>或者将<code>函数作为返回输出</code>的函数。</p> <h2 id="函数作为参数情况"><a href="#函数作为参数情况" class="header-anchor">#</a> 函数作为参数情况</h2> <p><code>Array.prototype.map</code>，<code>Array.prototype.filter</code>，<code>Array.prototype.reduce</code>和<code>Array.prototype.sort</code>是JavaScript中内置的高阶函数。它们接受一个函数作为参数，并应用这个函数到列表的每一个元素。下面是一些内置高阶函数的具体说明讲解，以及和不使用高阶函数情况下的对比</p> <h2 id="array-prototype-map"><a href="#array-prototype-map" class="header-anchor">#</a> Array.prototype.map</h2> <p><code>map()</code>(映射)方法最后生成一个新数组，不改变原始数组的值。其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span><span class="token punctuation">[</span> thisObject<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>callback(回调函数)</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>传递给 <code>map</code> 的回调函数（<code>callback</code>）接受三个参数，分别是<code>currentValue</code>——正在遍历的元素、index（可选）——元素索引、array（可选）——原数组本身，除了 <code>callback</code> 之外还可以接受 this 值（可选），用于执行 <code>callback</code> 函数时使用的this 值。</p> <p>来个简单的例子方便理解，现在有一个数组<code>[1,2,3,4]</code>，我们想要生成一个新数组，其每个元素皆是之前数组的两倍，那么我们有下面两种使用高阶和不使用高阶函数的方式来实现。</p> <h3 id="不使用高阶函数"><a href="#不使用高阶函数" class="header-anchor">#</a> 不使用高阶函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// koala</span>
<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="使用高阶函数"><a href="#使用高阶函数" class="header-anchor">#</a> 使用高阶函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// kaola</span>
<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="map高阶函数注意点"><a href="#map高阶函数注意点" class="header-anchor">#</a> map高阶函数注意点</h3> <p>callback需要有return值，否则会出现所有项映射为undefind；</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// kaola</span>
<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ undefined, undefined, undefined, undefined ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="map高阶函数对应的一道经典面试题"><a href="#map高阶函数对应的一道经典面试题" class="header-anchor">#</a> map高阶函数对应的一道经典面试题</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//输出结果</span>
<span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>看了这道题不知道会不会有大多数开发者认为输出结果是[1,2,3],<strong>错误</strong></p> <p>正确的输出结果为：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">]</span>
</code></pre></div><h5 id="分析与讲解"><a href="#分析与讲解" class="header-anchor">#</a> 分析与讲解</h5> <p>因为<code>map</code>的<code>callback</code>函数有三个参数，正在遍历的元素, 元素索引(index), 原数组本身(array)。<code>parseInt</code>有两个参数，string和radix(进制)，注意第二个参数进制当为0或者没有参数的时候，parseInt()会根据string来判断数字的基数。当忽略参数 radix , JavaScript 默认数字的基数如下:</p> <ul><li>如果 string 以 &quot;0x&quot; 开头，parseInt() 会把 string 的其余部分解析为十六进制的整数。</li> <li>如果 string 以 0 开头，那么 ECMAScript v3 允许 parseInt() 的一个实现把其后的字符解析为八进制或十六进制的数字。</li> <li>如果 string 以 1 ~ 9 的数字开头，parseInt() 将把它解析为十进制的整数。</li></ul> <p>只传入parseInt的话，map callback会自动忽略第三个参数array。而index参数不会被忽略。而不被忽略的index(0,1,2)就会被parseInt当做第二个参数。</p> <p>将其拆开看：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//上面说过第二个参数为进制，所以&quot;1&quot;，radix为0上面提到过，会忽略，根据string 以 1 ~ 9 的数字开头，parseInt() 将把它解析为十进制的整数1。</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时将2转为1进制数，由于超过进制数1，所以返回NaN。</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时将3转为2进制数，由于超过进制数1，所以返回NaN。</span>
</code></pre></div><p>所以最终的结果为<code>[1,NaN,NaN]</code>。</p> <p>那么如果想要得到<code>[1,2,3]</code>该怎么写。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以简写为：
<code>[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map(x=&gt;parseInt(x));</code></p> <p>这样写为什么就能返回想要的值呢？因为，传一个完整函数进去，有形参，有返回值。这样就不会造成因为参数传入错误而造成结果错误了，最后返回一个经纯函数处理过的新数组。</p> <h2 id="array-prototype-reduce"><a href="#array-prototype-reduce" class="header-anchor">#</a> Array.prototype.reduce</h2> <p><code>reduce()</code> 方法对数组中的每个元素执行一个提供的 reducer 函数(升序执行)，将其结果汇总为单个返回值。传递给 reduce 的回调函数（<code>callback</code>）接受四个参数，分别是累加器 <code>accumulator</code>、<code>currentValue</code>——正在操作的元素、<code>currentIndex</code>（可选）——元素索引，但是它的开始会有特殊说明、array（可选）——原始数组本身，除了 <code>callback</code> 之外还可以接受初始值 <code>initialValue</code> 值（可选）。</p> <ul><li><p>如果没有提供 initialValue，那么第一次调用 callback 函数时，accumulator 使用原数组中的第一个元素，currentValue 即是数组中的第二个元素。 在没有初始值的空数组上调用 reduce 将报错。</p></li> <li><p>如果提供了 initialValue，那么将作为第一次调用 callback 函数时的第一个参数的值，即 accumulator，currentValue 使用原数组中的第一个元素。</p></li></ul> <p>例子，现在有一个数组  [0, 1, 2, 3, 4]，需要计算数组元素的和，需求比较简单，来看下代码实现。</p> <h3 id="不使用高阶函数-2"><a href="#不使用高阶函数-2" class="header-anchor">#</a> 不使用高阶函数</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">//koala</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sum <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> sum <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [0, 1, 2, 3, 4]</span>
</code></pre></div><h3 id="使用高阶函数-2"><a href="#使用高阶函数-2" class="header-anchor">#</a> 使用高阶函数</h3> <h4 id="无-initialvalue-值"><a href="#无-initialvalue-值" class="header-anchor">#</a> 无 initialValue 值</h4> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> sum <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [0, 1, 2, 3, 4]</span>
</code></pre></div><p>上面是没有 initialValue 的情况，代码的执行过程如下，callback 总共调用四次。</p> <table><thead><tr><th>callback</th> <th>accumulator</th> <th>currentValue</th> <th>currentIndex</th> <th>array</th> <th>return value</th></tr></thead> <tbody><tr><td>first call</td> <td>0</td> <td>1</td> <td>1</td> <td>[0, 1, 2, 3, 4]</td> <td>1</td></tr> <tr><td>second call</td> <td>1</td> <td>2</td> <td>2</td> <td>[0, 1, 2, 3, 4]</td> <td>3</td></tr> <tr><td>third call</td> <td>3</td> <td>3</td> <td>3</td> <td>[0, 1, 2, 3, 4]</td> <td>6</td></tr> <tr><td>fourth call</td> <td>6</td> <td>4</td> <td>4</td> <td>[0, 1, 2, 3, 4]</td> <td>10</td></tr></tbody></table> <h4 id="有-initialvalue-值"><a href="#有-initialvalue-值" class="header-anchor">#</a> 有 initialValue 值</h4> <p>我们再来看下有 initialValue 的情况，假设 initialValue 值为 10，我们看下代码。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">//koala</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> sum <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [0, 1, 2, 3, 4]</span>
</code></pre></div><p>代码的执行过程如下所示，callback 总共调用五次。</p> <table><thead><tr><th>callback</th> <th>accumulator</th> <th>currentValue</th> <th>currentIndex</th> <th>array</th> <th>return value</th></tr></thead> <tbody><tr><td>first call</td> <td>10</td> <td>0</td> <td>0</td> <td>[0, 1, 2, 3, 4]</td> <td>10</td></tr> <tr><td>second call</td> <td>10</td> <td>1</td> <td>1</td> <td>[0, 1, 2, 3, 4]</td> <td>11</td></tr> <tr><td>third call</td> <td>11</td> <td>2</td> <td>2</td> <td>[0, 1, 2, 3, 4]</td> <td>13</td></tr> <tr><td>fourth call</td> <td>13</td> <td>3</td> <td>3</td> <td>[0, 1, 2, 3, 4]</td> <td>16</td></tr> <tr><td>fifth call</td> <td>16</td> <td>4</td> <td>4</td> <td>[0, 1, 2, 3, 4]</td> <td>20</td></tr></tbody></table> <h2 id="array-prototype-filter"><a href="#array-prototype-filter" class="header-anchor">#</a> Array.prototype.filter</h2> <p><code>filter</code>(过滤，筛选) 方法创建一个新数组,原始数组不发生改变。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span><span class="token punctuation">[</span> thisObject<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其包含通过提供函数实现的测试的所有元素。接收的参数和 map 是一样的，filter的<code>callbac</code>k函数需要返回布尔值true或false. 如果为true则表示通过啦！如果为false则失败，其返回值是一个新数组，由通过测试为true的所有元素组成，如果没有任何数组元素通过测试，则返回空数组。</p> <p>来个例子介绍下，现在有一个数组 <code>[1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]</code>，我们想要生成一个新数组，这个数组要求没有重复的内容，即为去重。</p> <h3 id="不使用高阶函数-3"><a href="#不使用高阶函数-3" class="header-anchor">#</a> 不使用高阶函数</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">===</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 5, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]</span>
</code></pre></div><h3 id="使用高阶函数-3"><a href="#使用高阶函数-3" class="header-anchor">#</a> 使用高阶函数</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> element <span class="token punctuation">)</span> <span class="token operator">===</span> index<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 3, 5, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4]</span>
</code></pre></div><h3 id="filter注意点说明"><a href="#filter注意点说明" class="header-anchor">#</a> filter注意点说明</h3> <p><code>callback</code>在过滤测试的时候，一定要是Boolean值吗？
例子：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arrayFilter <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrayFilter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre></div><p>通过例子可以看出:过滤测试的返回值只要是弱等于== true/false就可以了，而非非得返回 === true/false.</p> <h2 id="array-prototype-sort"><a href="#array-prototype-sort" class="header-anchor">#</a> Array.prototype.sort</h2> <p><code>sort()</code>方法用原地算法对数组的元素进行排序，并返回数组，该排序方法会在原数组上直接进行排序，并不会生成一个排好序的新数组。排序算法现在是稳定的。默认排序顺序是根据字符串Unicode码点。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 语法</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">[</span>compareFunction<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><code>compareFunction</code>参数是可选的，用来指定按某种顺序进行排列的函数。注意该函数有两个参数：</p> <p><strong>参数1:firstEl</strong></p> <p>第一个用于比较的元素。</p> <p><strong>参数2:secondEl</strong></p> <p>第二个用于比较的元素。看下面的例子与说明：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 未指明compareFunction函数</span>

<span class="token punctuation">[</span><span class="token string">'Google'</span><span class="token punctuation">,</span> <span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token string">'Microsoft'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['Apple', 'Google', 'Microsoft'];</span>

<span class="token comment">// apple排在了最后:</span>
<span class="token punctuation">[</span><span class="token string">'Google'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'Microsoft'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['Google', 'Microsoft&quot;, 'apple']</span>

<span class="token comment">// 无法理解的结果:</span>
<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 10, 2, 20]</span>
<span class="token comment">//正确的结果</span>
<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2，6, 8]</span>

<span class="token comment">// 指明compareFunction函数</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 10, 20]</span>
</code></pre></div><p>如果没有指明 <code>compareFunction</code> ，那么元素会按照转换为的字符串的诸个字符的<code>Unicode</code>位点进行排序。例如 &quot;Banana&quot; 会被排列到 &quot;cherry&quot; 之前。当数字按由小到大排序时，10 出现在 2 之前，但因为（没有指明 <code>compareFunction</code>），比较的数字会先被转换为字符串，所以在<code>Unicode</code>顺序上 &quot;10&quot; 要比 &quot;2&quot; 要靠前。</p> <p>如果指明了 <code>compareFunction</code> ，那么数组会按照调用该函数的返回值排序。即 a 和 b 是两个将要被比较的元素：</p> <ul><li><p>如果 compareFunction(a, b) 小于 0 ，那么 a 会被排列到 b 之前；</p></li> <li><p>如果 compareFunction(a, b) 等于 0 ， a 和 b 的相对位置不变。备注： ECMAScript 标准并不保证这一行为，而且也不是所有浏览器都会遵守（例如 Mozilla 在 2003 年之前的版本）；</p></li> <li><p>如果 compareFunction(a, b) 大于 0 ， b 会被排列到 a 之前。
compareFunction(a, b) 必须总是对相同的输入返回相同的比较结果，否则排序的结果将是不确定的。</p></li></ul> <h3 id="sort排序算法的底层实现"><a href="#sort排序算法的底层实现" class="header-anchor">#</a> sort排序算法的底层实现</h3> <p>看了上面<code>sort</code>的排序介绍，我想小伙伴们肯定会对sort排序算法的内部实现感兴趣，我在sf上面搜了一下，发现有些争议。于是去查看了V8引擎的源码，发现在源码中的710行</p> <blockquote><p>源码地址：https://github.com/v8/v8/blob/ad82a40509c5b5b4680d4299c8f08d6c6d31af3c/src/js/array.js</p></blockquote> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// In-place QuickSort algorithm.</span>
<span class="token comment">// For short (length &lt;= 22) arrays, insertion sort is used for efficiency.</span>
</code></pre></div><p>V8 引擎 sort 函数只给出了两种排序 <code>InsertionSort</code>和 <code>QuickSort</code>，<strong>数量小于等于22</strong>的数组使用 <code>InsertionSort</code>，比22大的数组则使用 <code>QuickSort</code>，有兴趣的可以看看具体算法实现。</p> <blockquote><p>注意：不同的浏览器引擎可能算法实现并不同，我这里只是查看了V8引擎的算法实现，有兴趣的小伙伴可以查看下其他开源浏览器具体sort的算法实现。</p></blockquote> <h3 id="如何改进排序算法实现数字正确排序呢"><a href="#如何改进排序算法实现数字正确排序呢" class="header-anchor">#</a> 如何改进排序算法实现数字正确排序呢？</h3> <p>对于要比较数字而非字符串，比较函数可以简单的以 a 减 b，如下的函数将会将数组升序排列，降序排序则使用b-a。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">compareNumbers</span><span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> koala<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>compareNumbers<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>koala<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1 , 2 , 10 , 20]</span>
</code></pre></div><h2 id="函数作为返回值输出"><a href="#函数作为返回值输出" class="header-anchor">#</a> 函数作为返回值输出</h2> <p>返回一个函数，下面直接看两个例子来加深理解。</p> <h3 id="istype-函数"><a href="#istype-函数" class="header-anchor">#</a> isType 函数</h3> <p>我们知道在判断类型的时候可以通过<code>Object.prototype.toString.call</code> 来获取对应对象返回的字符串，比如：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">isString</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object String]'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">isNumber</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Number]'</span><span class="token punctuation">;</span>
</code></pre></div><p>可以发现上面三行代码有很多重复代码，只需要把具体的类型抽离出来就可以封装成一个判断类型的方法了，代码如下。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">isType</span> <span class="token operator">=</span> <span class="token parameter">type</span> <span class="token operator">=&gt;</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object '</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token string">']'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">isType</span><span class="token punctuation">(</span><span class="token string">'String'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// true</span>
<span class="token function">isType</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
<span class="token function">isType</span><span class="token punctuation">(</span><span class="token string">'Number'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// true</span>
</code></pre></div><p>这里就是一个高阶函数，因为 isType 函数将 <code>obj =&gt; { ... }</code> 这一函数作为返回值输出。</p> <h3 id="add求和函数"><a href="#add求和函数" class="header-anchor">#</a> add求和函数</h3> <p>前言中的面试题，用 JS 实现一个无限累加的函数 add，示例如下：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>； <span class="token comment">// 6</span>
</code></pre></div><p>分析面试题的结构，都是将函数作为返回值输出，然后接收新的参数并进行计算。</p> <p>我们知道打印函数时会自动调用 <code>toString()</code>方法（如果不知道的可以去看我的这篇文章），函数 add(a) 返回一个sum(b)函数，函数 sum() 中累加计算 a = a + b，只需要重写sum.toString()方法返回变量 a 就可以了。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 使用闭包</span>
        a <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token comment">// 累加</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     sum<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 重写toString()方法</span>
        <span class="token keyword">return</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     <span class="token keyword">return</span> sum<span class="token punctuation">;</span> <span class="token comment">// 返回一个函数</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>； <span class="token comment">// 6</span>
</code></pre></div><h2 id="如何自己创建高阶函数"><a href="#如何自己创建高阶函数" class="header-anchor">#</a> 如何自己创建高阶函数</h2> <p>前面讲了语言中内置的各种高阶函数。知道了到底啊什么是高阶函数，有哪些类型的高阶函数。那么让我们<strong>自己创建一个高阶函数吧！</strong></p> <p>假设 JavaScript 没有原生的<code>map</code>方法。 我们自己构建个类似map的高阶函数，从而创建我们自己的高阶函数。
假设我们有一个字符串数组，我们希望把它转换为整数数组，其中每个元素代表原始数组中字符串的长度。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> strArray<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'JavaScript'</span><span class="token punctuation">,</span><span class="token string">'PHP'</span><span class="token punctuation">,</span><span class="token string">'JAVA'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token string">'Python'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">mapForEach</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> newArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        newArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> lenArray <span class="token operator">=</span> <span class="token function">mapForEach</span><span class="token punctuation">(</span>strArray<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lenArray<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[10,3,4,1,6]</span>
</code></pre></div><h3 id="代码分析讲解"><a href="#代码分析讲解" class="header-anchor">#</a> 代码分析讲解：</h3> <p>我们创建了一个高阶函数 mapForEach ，它接受一个数组和一个回调函数 fn。 它循环遍历传入的数组，并在每次迭代时在 newArray.push 方法调用回调函数 fn 。</p> <p>回调函数 fn 接收数组的当前元素并返回该元素的长度，该元素存储在 newArray 中。 for 循环完成后，newArray 被返回并赋值给 lenArray。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>我们已经了解了高阶函数和一些内置的高阶函数，还学习了如何创建自己的高阶函数。简而言之，高阶函数是一个可以接收函数作为参数，甚至返回一个函数的函数。 它就像常规函数一样，只是多了接收和返回其他函数的附加能力，即参数和输出。</p> <h3 id="公众号技术栈路线"><a href="#公众号技术栈路线" class="header-anchor">#</a> 公众号技术栈路线</h3> <p>大家好，我是koala，公众号「程序员成长指北」作者，这篇文章是【JS必知必会系列】的高阶函数讲解。目前在做一个node后端工程师进阶路线，加入我们一起学习吧！</p> <p><img src="http://img.xiaogangzai.cn/way.jpg" alt=""></p> <h3 id="加入我们"><a href="#加入我们" class="header-anchor">#</a> 加入我们</h3> <p><img src="http://img.xiaogangzai.cn/code.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/goodBlog/assets/js/app.d28268c4.js" defer></script><script src="/goodBlog/assets/js/2.d2277413.js" defer></script><script src="/goodBlog/assets/js/86.8dc4a8c3.js" defer></script><script src="/goodBlog/assets/js/4.7b44c081.js" defer></script><script src="/goodBlog/assets/js/3.6a3c886d.js" defer></script>
  </body>
</html>
