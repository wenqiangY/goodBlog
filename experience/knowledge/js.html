<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js小知识 | 长街有风</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" href="/goodBlog/favicon.ico" type="iamge/x-icon">
    <meta name="description" content="记录学习中的点点滴滴">
    <meta name="keywords" content="长街有风 前端 前端文章">
    
    <link rel="preload" href="/goodBlog/assets/css/0.styles.1a45a8ae.css" as="style"><link rel="preload" href="/goodBlog/assets/js/app.d28268c4.js" as="script"><link rel="preload" href="/goodBlog/assets/js/2.d2277413.js" as="script"><link rel="preload" href="/goodBlog/assets/js/26.35165b68.js" as="script"><link rel="preload" href="/goodBlog/assets/js/4.7b44c081.js" as="script"><link rel="preload" href="/goodBlog/assets/js/3.6a3c886d.js" as="script"><link rel="prefetch" href="/goodBlog/assets/js/10.05c2e5d3.js"><link rel="prefetch" href="/goodBlog/assets/js/100.89e3a374.js"><link rel="prefetch" href="/goodBlog/assets/js/101.f8cf1994.js"><link rel="prefetch" href="/goodBlog/assets/js/11.f03ca467.js"><link rel="prefetch" href="/goodBlog/assets/js/12.076a4731.js"><link rel="prefetch" href="/goodBlog/assets/js/13.d2471796.js"><link rel="prefetch" href="/goodBlog/assets/js/14.aa370daa.js"><link rel="prefetch" href="/goodBlog/assets/js/15.ce3ac647.js"><link rel="prefetch" href="/goodBlog/assets/js/16.852e98ff.js"><link rel="prefetch" href="/goodBlog/assets/js/17.93f57baa.js"><link rel="prefetch" href="/goodBlog/assets/js/18.9ba53fbd.js"><link rel="prefetch" href="/goodBlog/assets/js/19.0ff053ed.js"><link rel="prefetch" href="/goodBlog/assets/js/20.bd53997c.js"><link rel="prefetch" href="/goodBlog/assets/js/21.8ffe8741.js"><link rel="prefetch" href="/goodBlog/assets/js/22.ae7d0029.js"><link rel="prefetch" href="/goodBlog/assets/js/23.53afd0d5.js"><link rel="prefetch" href="/goodBlog/assets/js/24.bd29090d.js"><link rel="prefetch" href="/goodBlog/assets/js/25.00e6af77.js"><link rel="prefetch" href="/goodBlog/assets/js/27.a2e90537.js"><link rel="prefetch" href="/goodBlog/assets/js/28.838ac013.js"><link rel="prefetch" href="/goodBlog/assets/js/29.959b44d0.js"><link rel="prefetch" href="/goodBlog/assets/js/30.61a94ea6.js"><link rel="prefetch" href="/goodBlog/assets/js/31.d8dbba38.js"><link rel="prefetch" href="/goodBlog/assets/js/32.2195566d.js"><link rel="prefetch" href="/goodBlog/assets/js/33.3f6e9870.js"><link rel="prefetch" href="/goodBlog/assets/js/34.7a02b405.js"><link rel="prefetch" href="/goodBlog/assets/js/35.3a62b3c5.js"><link rel="prefetch" href="/goodBlog/assets/js/36.caada6f2.js"><link rel="prefetch" href="/goodBlog/assets/js/37.7740cdf0.js"><link rel="prefetch" href="/goodBlog/assets/js/38.6151e77b.js"><link rel="prefetch" href="/goodBlog/assets/js/39.33134a34.js"><link rel="prefetch" href="/goodBlog/assets/js/40.82ce5221.js"><link rel="prefetch" href="/goodBlog/assets/js/41.3d295fb8.js"><link rel="prefetch" href="/goodBlog/assets/js/42.ad3b9012.js"><link rel="prefetch" href="/goodBlog/assets/js/43.c5a12d58.js"><link rel="prefetch" href="/goodBlog/assets/js/44.570946d0.js"><link rel="prefetch" href="/goodBlog/assets/js/45.4e91972d.js"><link rel="prefetch" href="/goodBlog/assets/js/46.bb2a880d.js"><link rel="prefetch" href="/goodBlog/assets/js/47.03e818e0.js"><link rel="prefetch" href="/goodBlog/assets/js/48.6e9a3ab4.js"><link rel="prefetch" href="/goodBlog/assets/js/49.408fda99.js"><link rel="prefetch" href="/goodBlog/assets/js/5.02f0798d.js"><link rel="prefetch" href="/goodBlog/assets/js/50.3993d4c7.js"><link rel="prefetch" href="/goodBlog/assets/js/51.240d7d96.js"><link rel="prefetch" href="/goodBlog/assets/js/52.1dacb3a3.js"><link rel="prefetch" href="/goodBlog/assets/js/53.d99ee58d.js"><link rel="prefetch" href="/goodBlog/assets/js/54.119f8150.js"><link rel="prefetch" href="/goodBlog/assets/js/55.4d39b183.js"><link rel="prefetch" href="/goodBlog/assets/js/56.72765c69.js"><link rel="prefetch" href="/goodBlog/assets/js/57.25c2728c.js"><link rel="prefetch" href="/goodBlog/assets/js/58.93c4de40.js"><link rel="prefetch" href="/goodBlog/assets/js/59.07330fc9.js"><link rel="prefetch" href="/goodBlog/assets/js/6.f2844f3b.js"><link rel="prefetch" href="/goodBlog/assets/js/60.a9264c75.js"><link rel="prefetch" href="/goodBlog/assets/js/61.dcf4116c.js"><link rel="prefetch" href="/goodBlog/assets/js/62.c3783996.js"><link rel="prefetch" href="/goodBlog/assets/js/63.51b99bd0.js"><link rel="prefetch" href="/goodBlog/assets/js/64.a2055924.js"><link rel="prefetch" href="/goodBlog/assets/js/65.4d8ac745.js"><link rel="prefetch" href="/goodBlog/assets/js/66.c0ff17e2.js"><link rel="prefetch" href="/goodBlog/assets/js/67.1cebd1da.js"><link rel="prefetch" href="/goodBlog/assets/js/68.3ac34f13.js"><link rel="prefetch" href="/goodBlog/assets/js/69.66122a21.js"><link rel="prefetch" href="/goodBlog/assets/js/7.d712acc0.js"><link rel="prefetch" href="/goodBlog/assets/js/70.cf684b73.js"><link rel="prefetch" href="/goodBlog/assets/js/71.3f6457ac.js"><link rel="prefetch" href="/goodBlog/assets/js/72.5c597fbf.js"><link rel="prefetch" href="/goodBlog/assets/js/73.cb25ed57.js"><link rel="prefetch" href="/goodBlog/assets/js/74.45e7e30c.js"><link rel="prefetch" href="/goodBlog/assets/js/75.5462c8ff.js"><link rel="prefetch" href="/goodBlog/assets/js/76.9d48239d.js"><link rel="prefetch" href="/goodBlog/assets/js/77.fdd6937e.js"><link rel="prefetch" href="/goodBlog/assets/js/78.694293b3.js"><link rel="prefetch" href="/goodBlog/assets/js/79.d9d0b208.js"><link rel="prefetch" href="/goodBlog/assets/js/8.ea8178e6.js"><link rel="prefetch" href="/goodBlog/assets/js/80.eaab824c.js"><link rel="prefetch" href="/goodBlog/assets/js/81.02958dbf.js"><link rel="prefetch" href="/goodBlog/assets/js/82.e9176cac.js"><link rel="prefetch" href="/goodBlog/assets/js/83.ebe9efcd.js"><link rel="prefetch" href="/goodBlog/assets/js/84.57d2a35b.js"><link rel="prefetch" href="/goodBlog/assets/js/85.644297a0.js"><link rel="prefetch" href="/goodBlog/assets/js/86.8dc4a8c3.js"><link rel="prefetch" href="/goodBlog/assets/js/87.3a9b6fab.js"><link rel="prefetch" href="/goodBlog/assets/js/88.469cfb5f.js"><link rel="prefetch" href="/goodBlog/assets/js/89.0d83276b.js"><link rel="prefetch" href="/goodBlog/assets/js/9.a872d56c.js"><link rel="prefetch" href="/goodBlog/assets/js/90.002533a8.js"><link rel="prefetch" href="/goodBlog/assets/js/91.44d2f90c.js"><link rel="prefetch" href="/goodBlog/assets/js/92.9b0453a7.js"><link rel="prefetch" href="/goodBlog/assets/js/93.5dbf6406.js"><link rel="prefetch" href="/goodBlog/assets/js/94.5ecddf2f.js"><link rel="prefetch" href="/goodBlog/assets/js/95.9973d547.js"><link rel="prefetch" href="/goodBlog/assets/js/96.b230b097.js"><link rel="prefetch" href="/goodBlog/assets/js/97.a8be5d24.js"><link rel="prefetch" href="/goodBlog/assets/js/98.b93b29b6.js"><link rel="prefetch" href="/goodBlog/assets/js/99.a90f341b.js">
    <link rel="stylesheet" href="/goodBlog/assets/css/0.styles.1a45a8ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/goodBlog/" class="home-link router-link-active"><!----> <span class="site-name">长街有风</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link router-link-active">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link router-link-active">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <div class="my_introduce" style="padding-left:1rem;"><div class="introduce_component" data-v-ef03d332><img src="/goodBlog/small.jpg" alt data-v-ef03d332> <div class="intro_content" data-v-ef03d332><h3 data-v-ef03d332>长街有风</h3> <p data-v-ef03d332>十里长安街，有风徐徐来</p></div></div></div> <ul class="sidebar-links"><li><a href="/goodBlog/experience/" aria-current="page" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端小知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/goodBlog/experience/knowledge/html.html" class="sidebar-link">html小知识</a></li><li><a href="/goodBlog/experience/knowledge/css.html" class="sidebar-link">CSS小知识</a></li><li><a href="/goodBlog/experience/knowledge/js.html" aria-current="page" class="active sidebar-link">JS小知识</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uni-app</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>移动端适配</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js小知识"><a href="#js小知识" class="header-anchor">#</a> js小知识</h1> <p><a name="SattQ"></a></p> <h4 id="_1-解决-ios-audio-无法自动播放、循环播放的问题"><a href="#_1-解决-ios-audio-无法自动播放、循环播放的问题" class="header-anchor">#</a> 1.解决 ios audio 无法自动播放、循环播放的问题</h4> <p><code>ios</code> 手机在使用 <code>audio</code> 或者 <code>video</code> 播放的时候，个别机型无法实现自动播放，可使用下面的代码 <code>hack</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 解决ios audio无法自动播放、循环播放的问题</span>
<span class="token keyword">var</span> music <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        music<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;WeixinJSBridgeReady&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    music<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//循环播放</span>
music<span class="token punctuation">.</span><span class="token function-variable function">onended</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    music<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    music<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="02J0U"></a></p> <h4 id="_2-proxy-和-object-defineproperty-区别"><a href="#_2-proxy-和-object-defineproperty-区别" class="header-anchor">#</a> 2.Proxy 和 Object.defineProperty 区别</h4> <p><code>Proxy</code> 的意思是代理，我一般教他拦截器，可以拦截对象上的一个操作。用法如下，通过<code>new</code> 的方式创建对象，第一个参数是被拦截的对象，第二个参数是对象操作的描述。实例化后返回一个新的对象，当我们对这个新的对象进行操作时就会调用我们描述中对应的方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>Proxy</code> 区别于 <code>Object.definedProperty</code>。<br><code>Object.defineProperty</code> 只能监听到属性的读写，而 <code>Proxy</code> 除读写外还可以监听属性的删除，方法的调用等。<br>通常情况下我们想要监视数组的变化，基本要依靠重写数组方法的方式实现，这也是 Vue 的实现方式，而 <code>Proxy</code> 可以直接监视数组的变化。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> listproxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 标识设置成功</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Proxy</code> 是以非入侵的方式监管了对象的读写，而 <code>defineProperty</code> 需要按特定的方式定义对象的属性。
<a name="6ASAI"></a></p> <h4 id="_3-reflect"><a href="#_3-reflect" class="header-anchor">#</a> 3.Reflect</h4> <p>他是 <code>ES2015</code> 新增的对象，纯静态对象也就是不能被实例画，只能通过静态方法的方式调用，和 <code>Math</code> 对象类似，只能类似 <code>Math.random</code> 的方式调用。<br><code>Reflect</code> 内部封装了一系列对对象的底层操作，一共 14 个，其中 1 个被废弃，还剩下 13 个。<br><code>Reflect</code> 的静态方法和 <code>Proxy</code> 描述中的方法完全一致。也就是说 <code>Reflect</code> 成员方法就是<code>Proxy</code> 处理对象的默认实现。<br><code>Proxy</code> 对象默认的方法就是调用了 <code>Reflect</code> 内部的处理逻辑，也就是如果我们调用 <code>get</code>方法，那么在内部，<code>proxy</code> 就是将 <code>get</code> 原封不动的交给了 <code>Reflect</code>，如下。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>Reflect</code> 和 <code>Proxy</code> 没有绝对的关系，我们一般将他们两个放在一起讲是为了方便对二者的理解。<br>那为什么会有 <code>Reflect</code> 对象呢，其实他最大的用处就是提供了一套统一操作 <code>Object</code> 的<code>API</code>。判断对象是否存在某一个属性，可以使用 <code>in</code> 操作符，但是不够优雅，还可以使用<code>Reflect.has(obj, name)</code>; 删除一个属性可以使用 <code>delete</code>，也可以使用 <code>Reflect.deleteProperty(obj, name)</code>; 获取所有属性名可以使用 <code>Object.keys</code>, 也可以使用 <code>Reflect.ownKeys(obj)</code>; 我们更推荐使用 <code>Reflect</code> 的 <code>API</code> 来操作对象，因为他才是未来。
<a name="UfZZH"></a></p> <h4 id="_4-解析-get-参数"><a href="#_4-解析-get-参数" class="header-anchor">#</a> 4.解析 get 参数</h4> <p>通过 <code>replace</code> 方法获取 <code>url</code> 中的参数键值对，可以快速解析 <code>get</code> 参数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([^?&amp;=]+)=([^&amp;]+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span>k<span class="token punctuation">,</span>v</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>q<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="n5gzZ"></a></p> <h4 id="_5-解析连接-url"><a href="#_5-解析连接-url" class="header-anchor">#</a> 5.解析连接 url</h4> <p>可以通过创建 <code>a</code> 标签，给 <code>a</code> 标签赋值 <code>href</code> 属性的方式，获取到协议，<code>pathname</code>，<code>origin</code> 等 <code>location</code> 对象上的属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建a标签</span>
<span class="token keyword">const</span> aEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给a标签赋值href路径</span>
aEle<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'/test.html'</span><span class="token punctuation">;</span>
<span class="token comment">// 访问aEle中的属性</span>
aEle<span class="token punctuation">.</span>protocol<span class="token punctuation">;</span> <span class="token comment">// 获取协议</span>
aEle<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span> <span class="token comment">// 获取path</span>
aEle<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>
aEle<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
aEle<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/goodBlog/experience/knowledge/css.html" class="prev">CSS小知识</a></span> <span class="next"><a href="/goodBlog/experience/tools/verification.html">手机-身份证-邮箱验证</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/goodBlog/assets/js/app.d28268c4.js" defer></script><script src="/goodBlog/assets/js/2.d2277413.js" defer></script><script src="/goodBlog/assets/js/26.35165b68.js" defer></script><script src="/goodBlog/assets/js/4.7b44c081.js" defer></script><script src="/goodBlog/assets/js/3.6a3c886d.js" defer></script>
  </body>
</html>
