<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Flutter-打包 | 长街有风</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" href="/goodBlog/favicon.ico" type="iamge/x-icon">
    <meta name="description" content="记录学习中的点点滴滴">
    <meta name="keywords" content="长街有风 前端 前端文章">
    
    <link rel="preload" href="/goodBlog/assets/css/0.styles.1a45a8ae.css" as="style"><link rel="preload" href="/goodBlog/assets/js/app.d28268c4.js" as="script"><link rel="preload" href="/goodBlog/assets/js/2.d2277413.js" as="script"><link rel="preload" href="/goodBlog/assets/js/38.6151e77b.js" as="script"><link rel="preload" href="/goodBlog/assets/js/4.7b44c081.js" as="script"><link rel="preload" href="/goodBlog/assets/js/3.6a3c886d.js" as="script"><link rel="prefetch" href="/goodBlog/assets/js/10.05c2e5d3.js"><link rel="prefetch" href="/goodBlog/assets/js/100.89e3a374.js"><link rel="prefetch" href="/goodBlog/assets/js/101.f8cf1994.js"><link rel="prefetch" href="/goodBlog/assets/js/11.f03ca467.js"><link rel="prefetch" href="/goodBlog/assets/js/12.076a4731.js"><link rel="prefetch" href="/goodBlog/assets/js/13.d2471796.js"><link rel="prefetch" href="/goodBlog/assets/js/14.aa370daa.js"><link rel="prefetch" href="/goodBlog/assets/js/15.ce3ac647.js"><link rel="prefetch" href="/goodBlog/assets/js/16.852e98ff.js"><link rel="prefetch" href="/goodBlog/assets/js/17.93f57baa.js"><link rel="prefetch" href="/goodBlog/assets/js/18.9ba53fbd.js"><link rel="prefetch" href="/goodBlog/assets/js/19.0ff053ed.js"><link rel="prefetch" href="/goodBlog/assets/js/20.bd53997c.js"><link rel="prefetch" href="/goodBlog/assets/js/21.8ffe8741.js"><link rel="prefetch" href="/goodBlog/assets/js/22.ae7d0029.js"><link rel="prefetch" href="/goodBlog/assets/js/23.53afd0d5.js"><link rel="prefetch" href="/goodBlog/assets/js/24.bd29090d.js"><link rel="prefetch" href="/goodBlog/assets/js/25.00e6af77.js"><link rel="prefetch" href="/goodBlog/assets/js/26.35165b68.js"><link rel="prefetch" href="/goodBlog/assets/js/27.a2e90537.js"><link rel="prefetch" href="/goodBlog/assets/js/28.838ac013.js"><link rel="prefetch" href="/goodBlog/assets/js/29.959b44d0.js"><link rel="prefetch" href="/goodBlog/assets/js/30.61a94ea6.js"><link rel="prefetch" href="/goodBlog/assets/js/31.d8dbba38.js"><link rel="prefetch" href="/goodBlog/assets/js/32.2195566d.js"><link rel="prefetch" href="/goodBlog/assets/js/33.3f6e9870.js"><link rel="prefetch" href="/goodBlog/assets/js/34.7a02b405.js"><link rel="prefetch" href="/goodBlog/assets/js/35.3a62b3c5.js"><link rel="prefetch" href="/goodBlog/assets/js/36.caada6f2.js"><link rel="prefetch" href="/goodBlog/assets/js/37.7740cdf0.js"><link rel="prefetch" href="/goodBlog/assets/js/39.33134a34.js"><link rel="prefetch" href="/goodBlog/assets/js/40.82ce5221.js"><link rel="prefetch" href="/goodBlog/assets/js/41.3d295fb8.js"><link rel="prefetch" href="/goodBlog/assets/js/42.ad3b9012.js"><link rel="prefetch" href="/goodBlog/assets/js/43.c5a12d58.js"><link rel="prefetch" href="/goodBlog/assets/js/44.570946d0.js"><link rel="prefetch" href="/goodBlog/assets/js/45.4e91972d.js"><link rel="prefetch" href="/goodBlog/assets/js/46.bb2a880d.js"><link rel="prefetch" href="/goodBlog/assets/js/47.03e818e0.js"><link rel="prefetch" href="/goodBlog/assets/js/48.6e9a3ab4.js"><link rel="prefetch" href="/goodBlog/assets/js/49.408fda99.js"><link rel="prefetch" href="/goodBlog/assets/js/5.02f0798d.js"><link rel="prefetch" href="/goodBlog/assets/js/50.3993d4c7.js"><link rel="prefetch" href="/goodBlog/assets/js/51.240d7d96.js"><link rel="prefetch" href="/goodBlog/assets/js/52.1dacb3a3.js"><link rel="prefetch" href="/goodBlog/assets/js/53.d99ee58d.js"><link rel="prefetch" href="/goodBlog/assets/js/54.119f8150.js"><link rel="prefetch" href="/goodBlog/assets/js/55.4d39b183.js"><link rel="prefetch" href="/goodBlog/assets/js/56.72765c69.js"><link rel="prefetch" href="/goodBlog/assets/js/57.25c2728c.js"><link rel="prefetch" href="/goodBlog/assets/js/58.93c4de40.js"><link rel="prefetch" href="/goodBlog/assets/js/59.07330fc9.js"><link rel="prefetch" href="/goodBlog/assets/js/6.f2844f3b.js"><link rel="prefetch" href="/goodBlog/assets/js/60.a9264c75.js"><link rel="prefetch" href="/goodBlog/assets/js/61.dcf4116c.js"><link rel="prefetch" href="/goodBlog/assets/js/62.c3783996.js"><link rel="prefetch" href="/goodBlog/assets/js/63.51b99bd0.js"><link rel="prefetch" href="/goodBlog/assets/js/64.a2055924.js"><link rel="prefetch" href="/goodBlog/assets/js/65.4d8ac745.js"><link rel="prefetch" href="/goodBlog/assets/js/66.c0ff17e2.js"><link rel="prefetch" href="/goodBlog/assets/js/67.1cebd1da.js"><link rel="prefetch" href="/goodBlog/assets/js/68.3ac34f13.js"><link rel="prefetch" href="/goodBlog/assets/js/69.66122a21.js"><link rel="prefetch" href="/goodBlog/assets/js/7.d712acc0.js"><link rel="prefetch" href="/goodBlog/assets/js/70.cf684b73.js"><link rel="prefetch" href="/goodBlog/assets/js/71.3f6457ac.js"><link rel="prefetch" href="/goodBlog/assets/js/72.5c597fbf.js"><link rel="prefetch" href="/goodBlog/assets/js/73.cb25ed57.js"><link rel="prefetch" href="/goodBlog/assets/js/74.45e7e30c.js"><link rel="prefetch" href="/goodBlog/assets/js/75.5462c8ff.js"><link rel="prefetch" href="/goodBlog/assets/js/76.9d48239d.js"><link rel="prefetch" href="/goodBlog/assets/js/77.fdd6937e.js"><link rel="prefetch" href="/goodBlog/assets/js/78.694293b3.js"><link rel="prefetch" href="/goodBlog/assets/js/79.d9d0b208.js"><link rel="prefetch" href="/goodBlog/assets/js/8.ea8178e6.js"><link rel="prefetch" href="/goodBlog/assets/js/80.eaab824c.js"><link rel="prefetch" href="/goodBlog/assets/js/81.02958dbf.js"><link rel="prefetch" href="/goodBlog/assets/js/82.e9176cac.js"><link rel="prefetch" href="/goodBlog/assets/js/83.ebe9efcd.js"><link rel="prefetch" href="/goodBlog/assets/js/84.57d2a35b.js"><link rel="prefetch" href="/goodBlog/assets/js/85.644297a0.js"><link rel="prefetch" href="/goodBlog/assets/js/86.8dc4a8c3.js"><link rel="prefetch" href="/goodBlog/assets/js/87.3a9b6fab.js"><link rel="prefetch" href="/goodBlog/assets/js/88.469cfb5f.js"><link rel="prefetch" href="/goodBlog/assets/js/89.0d83276b.js"><link rel="prefetch" href="/goodBlog/assets/js/9.a872d56c.js"><link rel="prefetch" href="/goodBlog/assets/js/90.002533a8.js"><link rel="prefetch" href="/goodBlog/assets/js/91.44d2f90c.js"><link rel="prefetch" href="/goodBlog/assets/js/92.9b0453a7.js"><link rel="prefetch" href="/goodBlog/assets/js/93.5dbf6406.js"><link rel="prefetch" href="/goodBlog/assets/js/94.5ecddf2f.js"><link rel="prefetch" href="/goodBlog/assets/js/95.9973d547.js"><link rel="prefetch" href="/goodBlog/assets/js/96.b230b097.js"><link rel="prefetch" href="/goodBlog/assets/js/97.a8be5d24.js"><link rel="prefetch" href="/goodBlog/assets/js/98.b93b29b6.js"><link rel="prefetch" href="/goodBlog/assets/js/99.a90f341b.js">
    <link rel="stylesheet" href="/goodBlog/assets/css/0.styles.1a45a8ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/goodBlog/" class="home-link router-link-active"><!----> <span class="site-name">长街有风</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link router-link-active">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/goodBlog/" class="nav-link">主页</a></div><div class="nav-item"><a href="/goodBlog/webframe/" class="nav-link">前端</a></div><div class="nav-item"><a href="/goodBlog/interview/" class="nav-link">面试问题</a></div><div class="nav-item"><a href="/goodBlog/flutter/" class="nav-link router-link-active">Flutter</a></div><div class="nav-item"><a href="/goodBlog/experience/" class="nav-link">项目经验</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关注 Menu" class="dropdown-title"><span class="title">关注</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.inode.club/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  程序员成长指北
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://aotu.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  凹凸实验室
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <div class="my_introduce" style="padding-left:1rem;"><div class="introduce_component" data-v-ef03d332><img src="/goodBlog/small.jpg" alt data-v-ef03d332> <div class="intro_content" data-v-ef03d332><h3 data-v-ef03d332>长街有风</h3> <p data-v-ef03d332>十里长安街，有风徐徐来</p></div></div></div> <ul class="sidebar-links"><li><a href="/goodBlog/flutter/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/goodBlog/flutter/win-construction.html" class="sidebar-link">Window下搭建Flutter开发环境</a></li><li><a href="/goodBlog/flutter/flutter-layout.html" class="sidebar-link">Flutter-解决键盘弹起导致页面布局错乱</a></li><li><a href="/goodBlog/flutter/flutter-status-bar.html" class="sidebar-link">Flutter-设置沉浸式状态栏</a></li><li><a href="/goodBlog/flutter/flutter-application.html" class="sidebar-link">Flutter-修改应用名称、图标、启动页</a></li><li><a href="/goodBlog/flutter/flutter_launcher_icons.html" class="sidebar-link">Flutter-插件自动生成应用图标</a></li><li><a href="/goodBlog/flutter/flutter-router.html" class="sidebar-link">Flutter-配置路由跳转、传参、路由守卫</a></li><li><a href="/goodBlog/flutter/flutter-package.html" aria-current="page" class="active sidebar-link">Flutter-打包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/goodBlog/flutter/flutter-package.html#android打包" class="sidebar-link">Android打包</a></li></ul></li><li><a href="/goodBlog/flutter/flutter-network.html" class="sidebar-link">Flutter-安卓打包后无法访问网络</a></li><li><a href="/goodBlog/flutter/flutter-errors.html" class="sidebar-link">Flutter-报错整合【持续更新】</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="android打包"><a href="#android打包" class="header-anchor">#</a> Android打包</h2> <h3 id="打包过程"><a href="#打包过程" class="header-anchor">#</a> 打包过程</h3> <h4 id="_1-app-签名"><a href="#_1-app-签名" class="header-anchor">#</a> 1. app 签名</h4> <p>如果您有现有 keystore，请跳至下一步。如果没有，请通过在运行以下命令来创建一个：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>keytool -genkey -v -keystore D:/key.jks -keyalg RSA -keysize <span class="token number">2048</span> -validity <span class="token number">10000</span> -alias key
</code></pre></div><ul><li>-keystore 参数后的值：D:/key.jks 是在D盘下生成一个<code>key.jks</code>的文件。文件名称可以自定义。</li> <li>-alias 参数后面的值：key 是app签名文件的别名，不一定是key也可以自定义别名。
<img src="https://user-gold-cdn.xitu.io/2020/1/10/16f8ea589d697b4e?w=977&amp;h=575&amp;f=png&amp;s=29178" alt="key">
把生成好的文件找一目录放好。<br>
注意: 保持文件私密; 不要将它加入公共源代码控制中。</li></ul> <h4 id="_2-配置key"><a href="#_2-配置key" class="header-anchor">#</a> 2. 配置key</h4> <p>在项目android目录下新建文件 “ <strong>key.properties</strong> ”</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>storePassword<span class="token operator">=</span>密匙库口令
keyPassword<span class="token operator">=</span>key密匙口令
keyAlias<span class="token operator">=</span>key别名
storeFile<span class="token operator">=</span>路径

列如：
storePassword<span class="token operator">=</span><span class="token number">123456</span>
keyPassword<span class="token operator">=</span><span class="token number">123456</span>
keyAlias<span class="token operator">=</span>key
storeFile<span class="token operator">=</span><span class="token constant">D</span><span class="token operator">:</span><span class="token operator">/</span><span class="token number">001</span><span class="token operator">/</span><span class="token number">001</span><span class="token operator">/</span>flutter<span class="token operator">/</span>key<span class="token punctuation">.</span>jks
</code></pre></div><h4 id="_3-配置build-gradle"><a href="#_3-配置build-gradle" class="header-anchor">#</a> 3. 配置build.gradle</h4> <p>3.1. 打开<code>android/app/build.gradle</code>文件<br>
找到</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>android <span class="token punctuation">{</span>
</code></pre></div><p>在android {之前加上以下三句</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>def keystorePropertiesFile <span class="token operator">=</span> rootProject<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;key.properties&quot;</span><span class="token punctuation">)</span>
def keystoreProperties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
keystoreProperties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>keystorePropertiesFile<span class="token punctuation">)</span><span class="token punctuation">)</span>

android <span class="token punctuation">{</span>
<span class="token operator">...</span>
</code></pre></div><p>3.2. 找到以下代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>buildTypes <span class="token punctuation">{</span>
    release <span class="token punctuation">{</span>
        <span class="token comment">// TODO: Add your own signing config for the release build.</span>
        <span class="token comment">// Signing with the debug keys for now, so `flutter run --release` works.</span>
        signingConfig signingConfigs<span class="token punctuation">.</span>debug
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>把这段代码替换为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    signingConfigs <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            keyAlias keystoreProperties<span class="token punctuation">[</span><span class="token string">'keyAlias'</span><span class="token punctuation">]</span>
            keyPassword keystoreProperties<span class="token punctuation">[</span><span class="token string">'keyPassword'</span><span class="token punctuation">]</span>
            storeFile <span class="token function">file</span><span class="token punctuation">(</span>keystoreProperties<span class="token punctuation">[</span><span class="token string">'storeFile'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            storePassword keystoreProperties<span class="token punctuation">[</span><span class="token string">'storePassword'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    buildTypes <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            <span class="token comment">// 替换成 release</span>
            signingConfig signingConfigs<span class="token punctuation">.</span>release
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-最后一步开始打包apk"><a href="#_4-最后一步开始打包apk" class="header-anchor">#</a> 4. 最后一步开始打包apk</h4> <p>在Terminal中输入命令 “ <code>flutter build apk</code> ”</p> <p>最后生成的apk（app-release.apk）在项目目录的 <code>build\app\outputs\apk\release</code>里</p> <h3 id="我在打包过程中遇到的报错和踩过的坑"><a href="#我在打包过程中遇到的报错和踩过的坑" class="header-anchor">#</a> 我在打包过程中遇到的报错和踩过的坑</h3> <h4 id="gradle-版本错误"><a href="#gradle-版本错误" class="header-anchor">#</a> <strong>gradle</strong> 版本错误</h4> <p><img src="https://user-gold-cdn.xitu.io/2020/1/10/16f8e10f9e21f783?w=984&amp;h=208&amp;f=png&amp;s=18701" alt="err2">
这个错误是版本过低的问题,我们打开<code>android/gradle/gradle-wrapper.properties</code>文件。<br>
把最后一行的<code>gradle-4.10.2-all.zip</code>改为<code>gradle-5.6.2-all.zip</code>后，在把<code>build</code>目录和<code>android</code>目录下的<code>.gradle</code>目录删除重新编译。<br>
注意：是<code>.gradle</code>不是<code>gradle</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>#Fri Jun <span class="token number">23</span> <span class="token number">08</span><span class="token operator">:</span><span class="token number">50</span><span class="token operator">:</span><span class="token number">38</span> <span class="token constant">CEST</span> <span class="token number">2017</span>
distributionBase<span class="token operator">=</span><span class="token constant">GRADLE_USER_HOME</span>
distributionPath<span class="token operator">=</span>wrapper<span class="token operator">/</span>dists
zipStoreBase<span class="token operator">=</span><span class="token constant">GRADLE_USER_HOME</span>
zipStorePath<span class="token operator">=</span>wrapper<span class="token operator">/</span>dists
distributionUrl<span class="token operator">=</span>https\<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>services<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>org<span class="token operator">/</span>distributions<span class="token operator">/</span>gradle<span class="token operator">-</span><span class="token number">5.6</span><span class="token number">.2</span><span class="token operator">-</span>all<span class="token punctuation">.</span>zip

</code></pre></div><p>除了以上的原因外,还有其他原因也会导致这个错误出现。例如：项目的应用图标大小与对应的图标目录不一致或者启动页图片有问题，在打包时也会出现这个问题。<br>
推荐使用插件自动生成应用图标。
<a href="https://juejin.im/post/6844904042414473224" target="_blank" rel="noopener noreferrer">flutter_launcher_icons<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="启动页图片问题报错"><a href="#启动页图片问题报错" class="header-anchor">#</a> 启动页图片问题报错</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code> failed to read <span class="token constant">PNG</span> signature<span class="token operator">:</span> file does not start <span class="token keyword">with</span> <span class="token constant">PNG</span> signature<span class="token punctuation">.</span>
</code></pre></div><p>这个问题真是我不小心踩的坑，本来我的启动页图片是<code>jpg</code>文件，但是我把它改成了<code>png</code>图片。<br>
项目开发过程中倒是没出什么问题，但是打包就出现以下的问题了
<img src="https://user-gold-cdn.xitu.io/2020/1/10/16f8e23a5c3d07a8?w=1021&amp;h=155&amp;f=png&amp;s=10552" alt="err4">
把图片格式改回原来的格式就可以正常打包了</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/goodBlog/flutter/flutter-router.html" class="prev">Flutter-配置路由跳转、传参、路由守卫</a></span> <span class="next"><a href="/goodBlog/flutter/flutter-network.html">Flutter-安卓打包后无法访问网络</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/goodBlog/assets/js/app.d28268c4.js" defer></script><script src="/goodBlog/assets/js/2.d2277413.js" defer></script><script src="/goodBlog/assets/js/38.6151e77b.js" defer></script><script src="/goodBlog/assets/js/4.7b44c081.js" defer></script><script src="/goodBlog/assets/js/3.6a3c886d.js" defer></script>
  </body>
</html>
